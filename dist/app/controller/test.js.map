{"version":3,"sources":["../../../app/controller/test.js"],"names":["Controller","require","convert","validator","utf8ForXml","inputStr","replace","TestController","ctx","console","log","header","request","token","app","jwt","verify","config","secret","email","body","state","user","module","exports"],"mappings":";;;;;;;;;;;;AACA,IAAMA,aAAaC,QAAQ,KAAR,EAAeD,UAAlC;;AAEA,IAAME,UAAUD,QAAQ,UAAR,GAAhB;AACA,IAAME,YAAYF,QAAQ,WAAR,CAAlB;;AAEA,SAASG,UAAT,CAAoBC,QAApB,EAA8B;AAC1B;AACA;AACA,WAAOA,SAASC,OAAT,CAAiB,qEAAjB,EAAwF,EAAxF,CAAP;AACH;;IAEKC,c;;;;;;;;;;;;;;;;;;;AAEUC,mC,GAAQ,I,CAARA,G;;AACRC,wCAAQC,GAAR,CAAY,KAAKF,GAAL,CAASG,MAArB;AACIA,sC,GAASH,IAAII,OAAJ,CAAYD,M;AACrBE,qC,GAAQF,OAAO,eAAP,C;;;AAEZF,wCAAQC,GAAR,CAAYG,KAAZ;kDACkB,KAAKC,GAAL,CAASC,GAAT,CAAaC,MAAb,CAAoBH,KAApB,EAA2B,KAAKC,GAAL,CAASG,MAAT,CAAgBF,GAAhB,CAAoBG,MAA/C,C,EAAVC,K,mBAAAA,K;;AACRV,wCAAQC,GAAR,CAAYS,KAAZ;;AAEA,qCAAKX,GAAL,CAASY,IAAT,GAAgB,KAAKZ,GAAL,CAASa,KAAT,CAAeC,IAA/B;;;;;;;;;;;;;;;;;;;EAXqBtB,U;;AAe7BuB,OAAOC,OAAP,GAAiBjB,cAAjB","file":"test.js","sourcesContent":["\nconst Controller = require('egg').Controller;\n\nconst convert = require('data2xml')();\nconst validator = require('validator');\n\nfunction utf8ForXml(inputStr) {\n    // FIXME: no-control-regex\n    /* eslint-disable no-control-regex */\n    return inputStr.replace(/[^\\x09\\x0A\\x0D\\x20-\\xFF\\x85\\xA0-\\uD7FF\\uE000-\\uFDCF\\uFDE0-\\uFFFD]/gm, '');\n}\n\nclass TestController extends Controller {\n    async test() {\n        const { ctx } = this;\n        console.log(this.ctx.header);\n        let header = ctx.request.header;\n        let token = header['authorization'];\n\n        console.log(token);\n        const { email } = this.app.jwt.verify(token, this.app.config.jwt.secret);\n        console.log(email);\n\n        this.ctx.body = this.ctx.state.user;\n    }\n}\n\nmodule.exports = TestController;\n"]}