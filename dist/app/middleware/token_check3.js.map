{"version":3,"sources":["../../../app/middleware/token_check3.js"],"names":["module","exports","options","app","console","log","config","ctx","next","token"],"mappings":";;;;AACAA,OAAOC,OAAP,GAAiB,UAACC,OAAD,EAAUC,GAAV,EAAkB;;AAG/BC,UAAQC,GAAR,CAAYF,IAAIG,MAAhB;AACA;;;AAGA;AAAA,uEAAO,iBAAeC,GAAf,EAAoBC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AACH;AACMN,qBAFH,GAEa,EAFb;AAGCO,mBAHD,GAGS,EAHT;;AAKJ;;AAECL,sBAAQC,GAAR,CAAYE,IAAID,MAAhB;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhDG;AAAA,qBAiDGE,MAjDH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;;AAAA;AAAA;AAAA;AAAA;AAmDH,CA1DD","file":"token_check3.js","sourcesContent":["\nmodule.exports = (options, app) => {\n\n\n    console.log(app.config)\n    /*\n     * 需要登录\n     */\n    return async function(ctx, next) {\n        // 后续中间件执行完成后将响应体转换成 gzip\n        const options = {};\n        let token = '';\n\n       // console.log(app.config);\n\n        console.log(ctx.config);\n\n\n        // if (ctx.request.headers.authorization) {\n        //     const strToken = ctx.request.headers.authorization.split(' ');\n        //     if (strToken.length === 2) {\n        //         token = strToken[1];\n        //     }\n        // } else {\n        //     token = ctx.query.token || ctx.request.body.token || ctx.request.headers['x-token'];\n        // }\n        // // if(!token){\n        // //     token=ctx.cookies\n        // // }\n        // options.token = token;\n        //\n        // console.log(token);\n        //\n        //\n        // let user = false;\n        // try {\n        //     user = app.jwt.verify(token, app.config.jwt.secret);\n        //     console.log(user);\n        //     if (user) {\n        //         ctx.user = user;\n        //     }\n        // } catch (e) {\n        //     console.log(e);\n        // }\n        // if (!user) {\n        //     console.log(4444);\n        //\n        //     if (ctx.isXHR) {\n        //         ctx.body = {\n        //             status: 403,\n        //             message: '认证失败，请重新登录'\n        //\n        //         };\n        //         return;\n        //     }\n        // }\n        // console.log(333);\n        await next();\n    };\n};\n"]}